(()=>{"use strict";var e={913:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={mongodb:{connectionString:"mongodb://localhost:27017/mongoDatabase"},firebase:{type:"service_account",project_id:"nodeecommerce-ab326",private_key_id:"1780493c8a14cb020924708463374c56a0a3c42c",private_key:"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCRKp1WOCCK78M8\nSf3Y+SYecE3AQ+00J2k+fPkk+TtDk6qGXTFAjM322JvPqhY2PD2vxfSjbSwpamhG\n8TJdm7wb1EaEcGpcK/chgP1F/60BKQWMivHnxS183k+HErjWkuQZKjADshBinJ5A\ny2DhsucFDU7iM/Wpp5sbM6oG62mKs4llNUlmEPRJcJC0R8r4XCsM3KiaF771Q2Gb\njy6nUJtHJAYfV6+SHyoDYj0GzIp9zwvF9ACo49XS+dM5DO9jfI08WlBNZIyGDtLs\nlL+uIQm71wiOjP3EBQGHkz3ZDLoKjoQrZm0UPnoj+5LCt/cvwEO+p/ENo7jBTpOg\nm75jparVAgMBAAECggEAAgNyTTjYErVCovpvv+uswK1UFr+acae+SPSYzA985/IL\nYnO2dCu/y5Wzi4zTZAsv29lGDGI+Q5DLQ3ii9zNqx4QJOlsIzqB5fAh6+taSArsb\n7ZgbxNgySlIXDkuPLsK40TSJl/OHUKbVdxabEGZX1/UYTADmfmTpvNXZnOD1BMx1\nWRTD/ICdGTv7DLLGPUHN7Lq/Frymu+iFMjPD4G0Dwkr8SI1mZnQMDBIPNIOWvbV5\nTVJjo2EGfLAF190VALly6LsWy8Ia04gUUCHtLpYvXYTr4mZqMxb0VtTrBvIaxM+b\ncu+zVg16jNVmstg9BuR98ACY4IB5ZC2OCzu8NxvNoQKBgQDE7Bc3+1PtMrM3GgfO\ncMJh9ZKMK36znyTFGJlqw3dzzNHRprVWiA94mnb/VgJ2P4P+aZzc0TaEJF8AOzMy\ndoXwplghh63nmj7QC4GiOgFRebXqzdYYOZAJkxeVFkyY6aOt4tCI45fWIazAV11v\nw8p9Hs5da7jNe8FzDVl/uo6oeQKBgQC8t5tfolTwCcMvKsZXNIIT2ozoee+nM2he\nWZJUB6VIV3igLu/PFTNRn4ZXKEH7GDZ9gZotw8a0DRaXUYPhB08laBqJN80Chivd\npQU6CQB4+auQSPAuDw92L0VYQOIBVBFYzlEY7IyPpNIxQkDv3m/Ey6IhQ3kr3Mz+\njtCfTY42PQKBgQCEy30g6GCBbZZDi09GXO4Ip1UrJ02rDZ/7NgqHX8dXFQFNczGI\nZ/qe5vNmXvcMDOsTDt+UXZV46RoTitiMqDbMwTBfdCLHM1I2c/v4jUtESWJvNF2z\nOmYyvrnBdSc0WyJg6bqdBXXoFg9sKb4913fehn69qx4Vm+YpkxAOvZzkaQKBgFXs\nRwrY71FHMJ42HI4x8xO1CzkB47K9/kQPBkfKH1/7q4lLNZaUsYP1XQYr5za7BHxK\nWPeDTuJFn0aQL7pySH/gkUxuoqIGksxcyS9uT8/E5W9RNkHSS5jk1u7iw8QVEbzc\nWyI8+ZahVa5l2wkbvsncaVo5zV7CLnescKJHfnuFAoGAe2hWraxf/3WrYXWvUwEE\nwgWyYYSKgqQjmWSc+1eQAmSgjKaXw2gSEk1P+bK6/e9/5SlwDf6X4WOR+IwJ7Ql2\nh9QGmAPpVTK4Ml4hRb2QjhXlfCuDli+WUhjVG8T+wqCqihEFyynaQMWchxapLBdr\n3vZT3o+/8sFCd+hvzAi4epQ=\n-----END PRIVATE KEY-----\n",client_email:"firebase-adminsdk-yz8l7@nodeecommerce-ab326.iam.gserviceaccount.com",client_id:"108572125430898665670",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-yz8l7%40nodeecommerce-ab326.iam.gserviceaccount.com"}}},108:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function c(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}i((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,u,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&u[0]?o.return:u[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,u[1])).done)return r;switch(o=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,o=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){c.label=u[1];break}if(6===u[0]&&c.label<r[1]){c.label=r[1],r=u;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(u);break}r[2]&&c.ops.pop(),c.trys.pop();continue}u=t.call(e,c)}catch(e){u=[6,e],o=0}finally{n=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(913)),a=u(n(185)),i=u(n(821));!function(){o(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a.default.connect(c.default.mongodb.connectionString)];case 1:return e=t.sent(),console.log(e),[3,3];case 2:return t.sent(),console.log("Fallo la conexion con mongoose"),[3,3];case 3:return[2]}}))}))}();var s=function(){function e(){}return e.prototype.addProduct=function(e){return o(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),console.log("entre al try del container"),[4,i.default.create({title:e.title,description:e.description,code:e.code,thumbnail:e.thumbnail,price:e.price,stock:e.stock})];case 1:return[2,n.sent()];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}}))}))},e.prototype.getById=function(e){return o(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,i.default.find({_id:e},{__V:0})];case 1:return t=n.sent(),console.log(t),[2]}}))}))},e.prototype.getProducts=function(){return o(this,void 0,void 0,(function(){var e,t;return r(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.default.find()];case 1:return e=n.sent(),console.log(e),[3,3];case 2:return t=n.sent(),console.log("No existen productos",t),[3,3];case 3:return[2]}}))}))},e.prototype.deleteById=function(e){return o(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,i.default.deleteOne(e)];case 1:return t=n.sent(),console.log(t),[2]}}))}))},e.prototype.updateProduct=function(e){return o(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,i.default.updateOne(e)];case 1:return t=n.sent(),console.log(t),[2]}}))}))},e}();t.default=s},295:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,u){function c(e){try{i(o.next(e))}catch(e){u(e)}}function a(e){try{i(o.throw(e))}catch(e){u(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}i((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,u,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&u[0]?o.return:u[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,u[1])).done)return r;switch(o=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,o=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){c.label=u[1];break}if(6===u[0]&&c.label<r[1]){c.label=r[1],r=u;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(u);break}r[2]&&c.ops.pop(),c.trys.pop();continue}u=t.call(e,c)}catch(e){u=[6,e],o=0}finally{n=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteById=t.getById=t.addProductsController=t.getProducts=void 0;var u=n(971);t.getProducts=function(e,t){return o(void 0,void 0,void 0,(function(){var e,n;return r(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,u.ProductDao.getProducts()];case 1:return e=o.sent(),t.json(e),[3,3];case 2:return n=o.sent(),console.log("No existen productos",n),[3,3];case 3:return[2]}}))}))},t.addProductsController=function(e,t){return o(void 0,void 0,void 0,(function(){var n,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),console.log("entre al try del controller"),n=e.body,console.log("data",n),console.log(u.ProductDao),[4,u.ProductDao.addProduct(n)];case 1:return o=r.sent(),console.log("newProduct",o),o?t.status(201).json({msg:"El producto se creo de manera exitosa",data:o}):t.status(400).json("No se pudo agregar el producto"),[3,3];case 2:return r.sent(),console.log("Ocurrio un error al agregar el producto"),[3,3];case 3:return[2]}}))}))},t.getById=function(e,t){return o(void 0,void 0,void 0,(function(){var n,o;return r(this,(function(r){switch(r.label){case 0:return n=Number(e.params.id),[4,u.ProductDao.getById(n)];case 1:return(o=r.sent())?t.send(o):t.status(404).json({error:"Producto no encontrado!"}),[2]}}))}))},t.deleteById=function(e,t){return o(void 0,void 0,void 0,(function(){var n;return r(this,(function(o){switch(o.label){case 0:return n=Number(e.params.id),[4,u.ProductDao.deleteById(n)];case 1:return o.sent()?t.json("Producto eliminado"):t.status(404).json({error:"Producto no encontrado!"}),[2]}}))}))}},971:function(e,t,n){var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return u(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};switch(Object.defineProperty(t,"__esModule",{value:!0}),t.CartDao=t.ProductDao=void 0,a(n(142)).default.config(),t.ProductDao=o,t.CartDao=void 0,process.env.DATABASE){case"firebase":break;case"mongodb":var i=Promise.resolve().then((function(){return c(n(500))}));t.ProductDao=o=i}},500:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return e.call(this)||this}return r(t,e),t}(u(n(108)).default);t.default=c},912:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return n()}},821:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(185)),u=new r.default.Schema({timestamp:{type:Date,default:Date.now()},title:{type:String,default:"No title"},description:{type:String,default:"No description"},code:{type:String,default:"No code"},thumbnail:{type:String,default:"No thumbnail"},price:{type:Number,default:1},stock:{type:Number,default:0}});t.default=r.default.model("Product",u)},479:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=n(295),u=n(860),c=o(n(912)),a=(0,u.Router)();a.get("/products",r.getProducts),a.get("/products/:id",r.getById),a.post("/products",c.default,r.addProductsController),a.delete("/products/:id",c.default,r.deleteById),e.exports=a},728:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(860)),u=n(479);o(n(142)).default.config();var c=process.env.PORT,a=(0,r.default)();a.use(r.default.json()),a.use(r.default.urlencoded({extended:!0})),a.use("/api",u),a.use((function(e,t,n){var o={error:"-2",descripcion:"ruta: ".concat(e.url," método: ").concat(e.method," no implementado")};t.status(404).json(o),n()})),a.listen(c,(function(){return console.log("Server listening on port: ".concat(c))})).on("error",(function(e){return console.log("Oh no! Something is broken on the server: ".concat(e))}))},142:e=>{e.exports=require("dotenv")},860:e=>{e.exports=require("express")},185:e=>{e.exports=require("mongoose")}},t={};!function n(o){var r=t[o];if(void 0!==r)return r.exports;var u=t[o]={exports:{}};return e[o].call(u.exports,u,u.exports,n),u.exports}(728)})();